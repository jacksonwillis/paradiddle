var Accented,DefaultNoteLengths,DefaultPatterns,Ghosted,HalfNote,Note,NoteLength,ParadiddlePattern,Pattern,QuarterNote,RandomSong,SixteenthNote,Song,WholeNote,__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};Array.prototype.sum=function(){return this.reduce(function(a,b){return a+b})};Array.prototype.shuffle=function(){return this.sort(function(){return Math.round(Math.random())})};
Array.prototype.sample=function(a){null==a&&(a=1);return this.shuffle().slice(0,a-1+1||9E9)};String.prototype.htmlEscape=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};NoteLength=function(){function a(a,c){this.length=a;this.name=null!=c?c:"note"}a.name="NoteLength";a.prototype.inspect=function(){return"(length "+this.name+")"};return a}();
Note=function(){function a(a,c){this.noteLength=a;this.weight=c}a.name="Note";a.prototype.inspect=function(){return"<Note "+this.noteLength.inspect()+" (weight "+this.weight+")>"};return a}();Pattern=function(){function a(a,c){this.name=a;this.notes=c}a.name="Pattern";a.prototype.length=function(){return this.notes.map(function(a){return a[0].length}).sum()};a.prototype.inspect=function(){return""+this.name+": "+this.notes.map(function(a){return"\n  "+a.inspect()}).join(" ")};return a}();
Song=function(){function a(){this.patterns=patterns=1<=arguments.length?__slice.call(arguments,0):[]}a.name="Song";return a}();RandomSong=function(a){function b(){b.__super__.constructor.call(this,ParadiddlePattern)}__extends(b,a);b.name="RandomSong";b.prototype.pp=function(){return this.patterns.map(function(a){return a.inspect()}).join("\n\n").htmlEscape()};return b}(Song);WholeNote=new NoteLength(1,"whole note");HalfNote=new NoteLength(0.5,"half note");QuarterNote=new NoteLength(0.25,"quarter note");
SixteenthNote=new NoteLength(0.0625,"sixteenth note");DefaultNoteLengths=[WholeNote,HalfNote,QuarterNote,SixteenthNote];Accented=2;Ghosted=1;ParadiddlePattern=new Pattern("Paradiddle",[new Note(SixteenthNote,Accented),new Note(SixteenthNote,Ghosted),new Note(SixteenthNote,Accented),new Note(SixteenthNote,Accented)]);DefaultPatterns=[ParadiddlePattern];console.log((new RandomSong).pp());
